<mat-form-field appearance="outline" class="w-100">
  <mat-label>Select Country</mat-label>

  <mat-select
    [formControl]="companyControl"
    (openedChange)="onOpen($event)"
    [panelClass]="'custom-select-panel'"
  >
    <mat-select-trigger>
      {{ companyControl.value?.name || 'Select Country' }}
    </mat-select-trigger>

    <!-- Sticky Filter Input -->
    <div class="filter-container" (click)="$event.stopPropagation()">
      <input
        matInput
        class="filter-input"
        placeholder="Search..."
        [(ngModel)]="countryFilter"
        (ngModelChange)="filterCountries()"
      />
    </div>

    <!-- Filtered Options -->
    <mat-option *ngFor="let country of filteredCountries" [value]="country">
      {{ country.name }}
    </mat-option>

    <!-- No results -->
    <mat-option *ngIf="filteredCountries.length === 0" disabled>
      No countries found
    </mat-option>
  </mat-select>
</mat-form-field>
